#!/bin/sh
set -e
bsh -classpath pjdbc.jar <<EOF
    try {
	source("tests/init.bsh");
	import java.sql.*;
	getClass("org.pjdbc.drivers.CatDriver");
	getClass("org.pjdbc.drivers.FilteringDriver");
	getClass("org.pjdbc.drivers.LoggingDriver");
	getClass("org.pjdbc.drivers.MockDriver");
	getClass("org.pjdbc.drivers.SinkDriver");
	getClass("org.pjdbc.drivers.TeeDriver");
	assertNotNull(DriverManager.getConnection("jdbc:cat:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:cat:jdbc:sink:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:cat:jdbc:sink:jdbc:cat:jdbc:sink:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:log:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:filter:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:log:jdbc:filter:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:log:jdbc:filter:jdbc:cat:jdbc:sink:jdbc:mock:foo"));
	assertNotNull(DriverManager.getConnection("jdbc:log:jdbc:filter:jdbc:cat:jdbc:tee:jdbc:sink:jdbc:mock:foo;jdbc:mock:bar"));
    } catch (e) {print(e); System.exit(1);}
EOF

# Local Variables:
# mode: java
# End:
