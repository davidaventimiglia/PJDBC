#!/bin/sh
set -e
bsh -classpath pjdbc.jar <<EOF
    try {
	source("init.bsh");
	import java.sql.*;
	getClass("org.pjdbc.drivers.MockDriver");
	getClass("org.pjdbc.drivers.SinkDriver");
	getClass("org.pjdbc.drivers.FilterDriver");
	getClass("org.pjdbc.drivers.TeeDriver");
	int i = 0;
	try{DriverManager.getConnection("jdbc: cat:jdbc:\nmock:foo");} catch (e) {i++;}
	try{DriverManager.getConnection("jdbc: cat:jdbc:\nsink:jdbc:mock:foo");} catch (e) {i++;}
	try{DriverManager.getConnection("jdbc: log:jdbc:\nfilter:jdbc:cat:jdbc:sink:jdbc:mock:foo");} catch (e) {i++;}
	try{DriverManager.getConnection("jdbc: log:jdbc:\nfilter:jdbc\n:cat :  jdbc:\ntee:jdbc:sink :jdbc:mock:foo ;\njdbc:mock:bar");} catch (e) {i++;}
	assert(i==4);
    } catch (e) {print(e); System.exit(1);}
EOF

# Local Variables:
# mode: java
# End:
