#!/usr/bin/bsh
    try {
	source("init.bsh");
	import java.sql.*;
	import org.pjdbc.drivers.*;
	getClass("org.pjdbc.drivers.MockDriver");
	Connection c = (Connection)(new PoolDriver().connect("jdbc:pool:jdbc:mock:foo", null));
	MockDriver d = (MockDriver)DriverManager.getDriver("jdbc:mock:foo");
	Statement stmt = c.createStatement();
	stmt.executeQuery("select * from person;");
	stmt.executeQuery("insert into person (last_name, first_name, age) values ('David', 'Ventimiglia', 42);");
	assert(d.getLog("jdbc:mock:foo")!=null);
	print(d.getLog("jdbc:mock:foo"));
	assertEquals("executeQuery[select * from person;]\n" +
		     "executeQuery[insert into person (last_name, first_name, age) values ('David', 'Ventimiglia', 42);]", d.getLog("jdbc:mock:foo"));
    } catch (e) {System.exit(1);}
