#!/bin/sh
set -e
bsh -classpath pjdbc.jar <<EOF
    try {
	source("tests/init.bsh");
	import org.pjdbc.drivers.*;
	getClass("org.pjdbc.drivers.MockDriver");
	assertFalse(new CatDriver().acceptsURL("jdbc:cat"));
	assertFalse(new CatDriver().acceptsURL("jdbc:cat:"));
	assertFalse(new CatDriver().acceptsURL("jdbc:cat:foo"));
	assertTrue(new CatDriver().acceptsURL("jdbc:cat:jdbc:mock:foo"));
    } catch (e) {System.exit(1);}
EOF
